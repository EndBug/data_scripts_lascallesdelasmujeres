# SCRIPTS to generate data for the project #LasCallesDeLasMujeres

Visit the web project: [#LasCallesDeLasMujeres](https://geochicasosm.github.io/lascallesdelasmujeres/) (in beta)


## Getting Started

The data displayed in the project [#LasCallesDeLasMujeres] (https://geochicasosm.github.io/lascallesdelasmujeres/) is generated by executing the scripts contained in this project. Below are the instructions to reproduce the process and be able to generate data for any city.


### Installation

To be able to download the project and execute the scripts, it is necessary to have installed:

* GIT (Download [AQUí](https://git-scm.com/downloads))
* Node.js (Download [AQUí](https://nodejs.org/es/download/))


Download the project:

```
git clone https://github.com/geochicasosm/data_scripts_lascallesdelasmujeres.git
```

Installing the packages:

```
npm install
```

Download [HERE](http://osmlab.github.io/osm-qa-tiles/) the complete OSM planet (or the area of interest) and save it in a folder called "data", inside the project folder.

```
./data/latest.planet.mbtiles
```


Instructions
======

### _Step 1_

Define [HERE](http://tools.geofabrik.de/calc/) the BBOX of the city to be treated.

Create a folder inside the project folder with the name of the city to be treated (lowercase, no spaces). Examples:

 **barcelona** 
 
 **sanjose** 
 
 **buenosaires** 


 

### Step 2_

Execute:

```
npm run step1 -- --area=[bbox] --ciudad=nombreciudad
```

* Example: **npm run step1 -- --area=[2.0875,41.2944,2.2582,41.4574] --ciudad=barcelona** 


The following two files are generated:
* nombreciudad_streets.geojson
* list.csv


### Step 3_

Apply the classification of the previous listing in masculine or feminine names. Two options:

#### Option 1:

A file with a list of names classified by gender is used (taken from public statistical institutes). In case the name does not appear in the list, a request is made to the NameSor online API. Run:

```
npm run step2 -- --ciudad=nombreciudad
```

* If the allowed free limit is reached, use option 2.

#### Option 2:

Install and use RapidMiner. Download [HERE](https://rapidminer.com/)

Follow [THIS](https://www.youtube.com/watch?v=wScgijiqA2c) tutorial.

**IMPORTANT**: 
It must be explicitly stated that
- the output format is a CSV
- the encoding is UTF-8.
- the name of the output file is 'list_genderize.csv'


### Step 4_

Apply the script that eliminates streets with reliability factors above and below -0.25 and 0.25.

Pass the parameter ** - wikipedia ** if you want to force the search for Wikipedia articles.

```
npm run step3 -- –-ciudad=nombreciudad --wikipedia
```

The file 'list_genderize.csv' or 'list_genderize_w.csv' is generated if we have forced the search in Wikipedia.


### Step 5_

Manually review the previous file:
- Remove streets that are not of person
- Correct errors in the male / female classification
- Correct and add Wikipedia links (streets with man's name do not need a link)

To consider:
- Reliability factor: Values from 2 to -2 (Female to Male).

Save the corrected file in the same project folder, with the name:

**nombreciudad_finalCSV.csv**

### Step 6_

Execute:

```
npm run step4 -- –-ciudad=nombreciudad
```

Three files are generated:
- **final_tile.geojson** Final file that will be loaded on the map
- **stats.txt** file with data statistics
- **noLinkList.txt** File with the list of streets without article in wikipedia


## Finally

Send us the three generated files and we will add your city to the map!

---

## Contribute to the project

Join our slack channel [#lascallesdelasmujeres](https://join.slack.com/t/geochicas-osm/shared_invite/enQtMzIzMzUyMDQyNjczLTU0YjYzNTQ2ZWRkOWQwZGJlNGY4NjhmODY4Y2M2M2Y2MDM3M2EyZTg4NWI0ODY2ZWRhZGIyN2JjMDc0ZDdlODE).


## Technical Coordinator

* **Jessica Sena** (*Spain*) - [@jsenag](https://jessisena.github.io/myprofile/) 
    
    Computer engineer, web/mobile geo-developer.
   


## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details


## Knowledgement


* [Project](https://blog.mapbox.com/mapping-female-versus-male-street-names-b4654c1e00d5) _Mapping female versus male street names_ of Mapbox by [Aruna Sankaranarayanan](https://www.mapbox.com/about/team/aruna-sankaranarayanan/) 

* [Open Street Map](https://www.openstreetmap.org/)

* [NameSor](http://api.namsor.com/onomastics/api/)

* [Wikipedia API](https://www.mediawiki.org/wiki/API:Main_page/es)

* [Geofabrik](http://tools.geofabrik.de/calc/)



